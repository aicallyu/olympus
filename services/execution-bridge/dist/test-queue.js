// ============================================================
// OLYMP Execution Bridge — Test Script
// Inserts a test execution request into the queue
// Run with: npx tsx src/test-queue.ts
// ============================================================
import { createClient } from '@supabase/supabase-js';
import 'dotenv/config';
const supabase = createClient(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);
async function testCodeCommit() {
    console.log('Inserting test code_commit into execution_queue...\n');
    const { data, error } = await supabase.from('execution_queue').insert({
        room_id: 'a0000000-0000-0000-0000-000000000001', // Main War Room
        requested_by: 'HERCULOS',
        execution_type: 'code_commit',
        payload: {
            files: [
                {
                    path: 'frontend/src/components/test-execution-bridge.txt',
                    content: `// This file was auto-generated by the OLYMP Execution Bridge
// Test timestamp: ${new Date().toISOString()}
// If you see this file in a branch, the bridge is working!
`,
                    action: 'create',
                },
            ],
            branch: 'test/execution-bridge',
            commit_message: 'test: verify execution bridge is working',
            base_branch: 'main',
        },
        status: 'pending',
    }).select().single();
    if (error) {
        console.error('❌ Failed to insert:', error.message);
        return;
    }
    console.log('✅ Test item inserted:');
    console.log(`  ID: ${data.id}`);
    console.log(`  Status: ${data.status}`);
    console.log('\nThe execution bridge should pick this up and process it.');
    console.log('Check the War Room for status updates.');
}
testCodeCommit().catch(console.error);
//# sourceMappingURL=test-queue.js.map