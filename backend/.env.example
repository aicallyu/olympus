# Mission Control Backend

## Environment Variables

Copy this file to `.env` and fill in your values:

```env
# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key

# Server
PORT=3001
```

## Setup

1. Install dependencies:
   ```bash
   npm install
   ```

2. Set up environment variables:
   ```bash
   cp .env.example .env
   # Edit .env with your Supabase credentials
   ```

3. Run database migrations:
   ```bash
   # Apply schema.sql in Supabase SQL Editor
   ```

4. Start development server:
   ```bash
   npm run dev
   ```

## API Endpoints

### Agents
- `GET /api/agents` - List all agents
- `GET /api/agents/:id` - Get specific agent
- `GET /api/agents/:id/tasks` - Get agent's tasks
- `PATCH /api/agents/:id/status` - Update agent status

### Tasks
- `GET /api/tasks` - List tasks (filter: ?status=&assignee=&priority=)
- `POST /api/tasks` - Create new task
- `GET /api/tasks/:id` - Get specific task with messages and activities
- `PATCH /api/tasks/:id` - Update task
- `PATCH /api/tasks/:id/status` - Update task status
- `POST /api/tasks/:id/assign` - Assign task to agent

### Messages
- `GET /api/messages?task_id=xxx` - Get messages for task
- `POST /api/messages` - Create new message

### Activities
- `GET /api/activities?agent=&task=&limit=` - Get activity feed

### Notifications
- `GET /api/notifications?agent=xxx` - Get notifications for agent
- `PATCH /api/notifications/:id/deliver` - Mark as delivered

### Documents
- `GET /api/documents?task_id=xxx` - Get documents
- `POST /api/documents` - Create document
- `GET /api/documents/:id` - Get specific document

## Health Check

```bash
curl http://localhost:3001/health
```
